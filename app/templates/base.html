<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YabaTech JSS — School Management</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Material Symbols -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=4">
    {% block extra_css %}{% endblock %}
</head>

<body>

    <!-- ═══ SIDEBAR ═══ -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <span class="material-symbols-outlined logo-icon">school</span>
            <div>
                <h2>YabaTech JSS</h2>
                <p>Admin Portal</p>
            </div>
        </div>

        <div class="sidebar-nav">
            <span class="nav-section-label">Main</span>

            <a href="{{ url_for('main.dashboard') }}"
                class="nav-link {% if request.endpoint == 'main.dashboard' %}active{% endif %}">
                <span class="material-symbols-outlined">dashboard</span>
                <span>Dashboard</span>
            </a>

            <a href="{{ url_for('students.index') }}"
                class="nav-link {% if request.endpoint and 'students' in request.endpoint %}active{% endif %}">
                <span class="material-symbols-outlined">groups</span>
                <span>Students</span>
            </a>

            <span class="nav-section-label">Academics</span>

            <a href="{{ url_for('sessions.index') }}"
                class="nav-link {% if request.endpoint and 'sessions' in request.endpoint %}active{% endif %}">
                <span class="material-symbols-outlined">date_range</span>
                <span>Sessions</span>
            </a>

            <a href="{{ url_for('subjects.index') }}"
                class="nav-link {% if request.endpoint and 'subjects' in request.endpoint %}active{% endif %}">
                <span class="material-symbols-outlined">menu_book</span>
                <span>Subjects</span>
            </a>

            <a href="{{ url_for('scores.index') }}"
                class="nav-link {% if request.endpoint and 'scores' in request.endpoint %}active{% endif %}">
                <span class="material-symbols-outlined">grading</span>
                <span>Score Entry</span>
            </a>

            <span class="nav-section-label">Records</span>

            <a href="{{ url_for('reports.index') }}"
                class="nav-link {% if request.endpoint and 'reports' in request.endpoint %}active{% endif %}">
                <span class="material-symbols-outlined">description</span>
                <span>Reports</span>
            </a>

            <a href="{{ url_for('attendance.index') }}"
                class="nav-link {% if request.endpoint and 'attendance' in request.endpoint %}active{% endif %}">
                <span class="material-symbols-outlined">fact_check</span>
                <span>Attendance</span>
            </a>
        </div>

        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">AD</div>
                <div class="user-details">
                    <span class="user-name">Admin</span>
                    <span class="user-role">School Administrator</span>
                </div>
            </div>
            <a href="{{ url_for('auth.logout') }}" class="nav-link" style="margin-top: 8px;">
                <span class="material-symbols-outlined">logout</span>
                <span>Logout</span>
            </a>
        </div>
    </nav>

    <!-- ═══ MAIN CONTENT ═══ -->
    <main class="main-content" id="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <!-- Search -->
            <div class="top-bar-search">
                <span class="material-symbols-outlined">search</span>
                <input type="text" placeholder="Search Here...">
            </div>

            <!-- Actions -->
            <div class="top-bar-actions">
                <button class="dark-toggle" id="dark-toggle" title="Toggle Dark Mode">
                    <span class="material-symbols-outlined">dark_mode</span>
                </button>

                <div class="top-bar-divider"></div>

                <!-- User Profile -->
                <div class="top-bar-user">
                    <div class="user-avatar">AD</div>
                    <div class="user-details">
                        <span class="user-name">Admin</span>
                        <span class="user-role">Administrator</span>
                    </div>
                </div>
            </div>
        </div>

        {% block content %}{% endblock %}
    </main>

    <!-- Toast container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/main.js') }}?v=2"></script>
    {% block extra_js %}{% endblock %}

    <!-- Dark Mode Toggle Script -->
    <script>
        (function () {
            const toggle = document.getElementById('dark-toggle');
            const icon = document.getElementById('dark-toggle-icon');
            const html = document.documentElement;

            // Restore saved preference
            if (localStorage.getItem('darkMode') === 'true') {
                html.classList.add('dark');
                icon.textContent = 'light_mode';
            }

            toggle.addEventListener('click', () => {
                html.classList.toggle('dark');
                const isDark = html.classList.contains('dark');
                icon.textContent = isDark ? 'light_mode' : 'dark_mode';
                localStorage.setItem('darkMode', isDark);
            });
        })();
    </script>
</body>

</html>